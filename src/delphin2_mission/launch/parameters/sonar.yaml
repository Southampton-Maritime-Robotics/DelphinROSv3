# Parameters for the MICRON and SEAKING sonar
# used for running the sonar on the vehicle

#
# Sonar Settings
#

# Left limit for Heading
# in [1/16th gradian]
sonar/LLim: 130



# Right limit for Heading
# in [1/16th gradian]
sonar/RLim: 150

# Number of sample bins over scan-line
# Max for SeaKing/SeaPrince/MiniKing/Micron: 800
# New digital DST sonar products: 1500
# see delphin2_sonar_micron_*.pdf in the datasheets
# more bins = more resolution, more noise
sonar/NBins: 800

# Samping interval of each range bin
# usually not used, since Range is used to calculate this 
# in units of [640 nanoseconds]
sonar/ADInterval: 5

# Range
# used to calculate the ADInterval
# in [metres]
sonar/Range: 6

# not used in 8 bit mode
sonar/ADSpan:  210
sonar/ADLow: 0

# Initial gain for channel 1
sonar/IGainB1: 84
# Initial gain for channel 2
sonar/IGainB2: 84

# High-speed limit of scanning motor
# in [10 microseconds]
sonar/MoTime: 25
# Step resolution of scanning motor
# in [16th of a gradian]
# defaults: 32, 16, 8, 4
# 64 used in all Delphin2 sonar applications before 2016
sonar/Step: 64


#
# Communication protocol
# 
# these settings are needed for use in the serial protocol,
# but either they are just part of the serial protocol
# or it is not specified clearly what they do
#

# Serial Port Settings
# on delphin2 the port is /dev/ttyS3
# on a laptop this may vary, e.g. /dev/ttyUSB0
# the baudrate should not be changed, since it needs to be the same setting on computer and sonar
sonar/serial/Port: '/dev/ttyUSB0'
sonar/serial/Baudrate: 115200

# Timeout for reading sonar data after sonar ping message
sonar/serial/ReadTimeout: 2

# Receive error count from which the sonar communication is considererd as failed
# and the serial communication is reset
sonar/serial/CriticalErrorCount: 5

# head Type selection
# 1 for MICRON, 29 for SEAKING
sonar/serial/HeadType: 1

# Source transmissiono node
sonar/serial/SID: 255

# Msg destination node
sonar/serial/DID: 2

# Default msgSeq value
sonar/serial/MsgSeq: 128

# Repeat of SID (not what it sais in the manual!)
sonar/serial/Node: 255

#
# HdCtrl bytes
# see datasheets delphin2_sonar_micron_*.pdf
# most significant bit: left most bit
sonar/serial/HdCtrl1: '00000101'
sonar/serial/HdCtrl2: '00100011'

# set as DST head type
sonar/serial/DstHead: 11

# Default 500, no further explanation given
sonar/serial/MaxADBuf: 500
# Blanking interval, default 100
# in [microseconds]
sonar/serial/Lockout: 100
# Default 1600 for single channel, no further explanation given
sonar/serial/MinorAxis: 1600
# Default 1 for single channel, no further explanation given
sonar/serial/MajorAxis: 1
# Extra control parameters, default 0, no further explanation given
sonar/serial/Ctl2: 0
# ASCII headers for different message types
# mtSendData message header '@000C'
sonar/serial/HeaderMtSendData: [64,48,48,48,67]
# mtHeadCommand message header '@003C'
sonar/serial/HeaderMtHeadCommand: [64,48,48,51,67]
# Length of block in 3 bit unit
sonar/serial/HexLength: [12,0]
# Number of bytes following count byte - excluding LF character
sonar/serial/Count: 7
# Message identification number
sonar/serial/MsgNum: 25
# Current time for sonar - not required for imaing as signals not time stamped
sonar/serial/CurrentTime: [0,0,0,0]
# End of line character
sonar/serial/LF: 10
